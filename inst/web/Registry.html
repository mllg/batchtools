<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>getDefaultRegistry. batchtools 0.1</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">batchtools 0.1</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Construct a Registry Object</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>getDefaultRegistry()</div>
<div>clearDefaultRegistry()</div>
<div>makeRegistry(file.dir&nbsp;=&nbsp;"registry", work.dir&nbsp;=&nbsp;getwd(), conf.file&nbsp;=&nbsp;getOption("batchtools.conf.file", "~/.batchtools.conf.r"), packages&nbsp;=&nbsp;character(0L), namespaces&nbsp;=&nbsp;character(0L), seed&nbsp;=&nbsp;NULL, make.default&nbsp;=&nbsp;TRUE)</div>
<div>makeTempRegistry(make.default&nbsp;=&nbsp;FALSE, temp.dir&nbsp;=&nbsp;getOption("batchtools.temp.dir", tempdir()), ...)</div>
<div>loadRegistry(file.dir&nbsp;=&nbsp;"registry", work.dir&nbsp;=&nbsp;NULL, conf.file&nbsp;=&nbsp;getOption("batchtools.conf.file", "~/.batchtools.conf.r"), make.default&nbsp;=&nbsp;TRUE, update.paths&nbsp;=&nbsp;FALSE)</div>
<div>saveRegistry(reg&nbsp;=&nbsp;getDefaultRegistry())</div>
<div>syncRegistry(reg&nbsp;=&nbsp;getDefaultRegistry(), save&nbsp;=&nbsp;TRUE)</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>file.dir</dt>
      <dd>[<code>character(1)</code>]
Path where all files of the registry are saved.
Default is directory &#147;registry&#148; in the current working directory.</dd>
      <dt>work.dir</dt>
      <dd>[<code>character(1)</code>]
Working directory for R process when experiment is executed.
For <code>makeRegistry</code>, this defaults to the current working directory.
<code>loadRegistry</code> uses the stored <code>work.dir</code>, but you may also explicitly provide one
yourself.</dd>
      <dt>conf.file</dt>
      <dd>[<code>character(1)</code>]
Path to a configuration file which is sourced directly after the registry is created.
For example, you can set system-specific cluster functions in it.
The script is executed inside the registry environment, thus you can directly set
all slots, e.g. &#147;debug = TRUE&#148; would overwrite the debug flag of the registry.
The default location of the configuration can be set via the option &#147;batchtools.conf.file&#148;.</dd>
      <dt>packages</dt>
      <dd>[<code>character</code>]
Packages that will always be loaded on each node.
Uses <code><a href='http://www.inside-r.org/r-doc/base/library'>require</a></code> internally.
Default is <code>character(0)</code>.</dd>
      <dt>namespaces</dt>
      <dd>[<code>character</code>]
Same as <code>packages</code>, but the packages will not be attached.
Uses <code><a href='http://www.inside-r.org/r-doc/base/ns-load'>requireNamespace</a></code> internally.
Default is <code>character(0)</code>.</dd>
      <dt>seed</dt>
      <dd>[<code>integer(1)</code>]
Start seed for jobs. Each job uses the (<code>seed</code> + <code>job.id</code>) as seed.
Default is a random number in the range [1, <code>.Machine$integer.max/2</code>].</dd>
      <dt>make.default</dt>
      <dd>[<code>logical(1)</code>]
If set to <code>TRUE</code>, the created registry is saved inside the package
namespace and acts as default registry. You might want to switch this
off if you work with multiple registries simultaneously.
Default is <code>TRUE</code>.</dd>
      <dt>temp.dir</dt>
      <dd>[<code>character(1)</code>]
Path to temporary directory.
Defaults to the value of the option &#147;batchtools.temp.dir&#148; or (if unset) <code><a href='http://www.inside-r.org/r-doc/base/tempfile'>tempdir</a></code>.</dd>
      <dt>...</dt>
      <dd>[<code>ANY</code>]
Additional parameters passed to <code>makeRegistry</code>.</dd>
      <dt>update.paths</dt>
      <dd>[<code>logical(1)</code>]
If set to <code>TRUE</code>, the <code>file.dir</code> and <code>work.dir</code> will be updated in the registry. Note that this is
likely to break computation on the system, only do this if no jobs are currently running. Default is <code>FALSE</code>.
If the provided <code>file.dir</code> does not match the stored <code>file.dir</code>, <code>loadRegistry</code> will return a
registry in an read-only mode.</dd>
      <dt>reg</dt>
      <dd>[<code><a href='Registry.html'>Registry</a></code>]
Registry. If not explictitly passed, uses the last created registry.</dd>
      <dt>save</dt>
      <dd>[<code>logical(1)</code>]
Save the registry to the file system? Default is <code>TRUE</code>.</dd>
    </dl>
    
    <div class="Value">
      <h2>Value</h2>

      <p><dl>
[<code>Registry</code>]. An environment with the following slots:
  <dl>
    <dt>file.dir</dt><dd>File directory.</dd></p>
  
      <p><dt>work.dir</dt><dd>Working directory.</dd></p>
  
      <p><dt>packages</dt><dd>Packages to load on the slaves.</dd></p>
  
      <p><dt>namespaces</dt><dd>Namespaces to load on the slaves.</dd></p>
  
      <p><dt>seed</dt><dd>Registry seed. Before each job is executed, the seed <code>seed + job.id</code> is set.</dd></p>
  
      <p><dt>debug</dt><dd>Flag to turn additional debug functionality on.</dd></p>
  
      <p><dt>cluster.functions</dt><dd>Usually set in your <code>conf.file</code>. Set via a call to <code><a href='makeClusterFunctions.html'>makeClusterFunctions</a></code>. See example.</dd></p>
  
      <p><dt>default.resources</dt><dd>Usually set in your <code>conf.file</code>. Named list of default resources.</dd></p>
  
      <p><dt>max.concurrent.jobs</dt><dd>Usually set in your <code>conf.file</code>. Maximum number of concurrent jobs for a single user on the system. <code><a href='submitJobs.html'>submitJobs</a></code> will try to respect this setting.</dd></p>
  
      <p><dt>defs</dt><dd>Table with job definitions (i.e. parameters).</dd></p>
  
      <p><dt>status</dt><dd>Table holding information about the computational status. Also see <code><a href='getJobInfo.html'>getJobStatus</a></code>.</dd></p>
  
      <p><dt>resources</dt><dd>Table holding information about the computational resources used for the job. Also see <code><a href='getJobInfo.html'>getJobResources</a></code>.</dd></p>
  
      <p></dl></p>
  
      <p></dl></p>
  
    </div>

    <div class="Description">
      <h2>Description</h2>

      <p><code>makeRegistry</code> constructs the inter-communication object for all functions in <code>batchtools</code>.
The registry created last is saved in the package namespace (unless <code>make.default</code> is set to
<code>FALSE</code>) and can be retrieved via <code>getDefaultRegistry</code>.</p>
  
      <p><code>makeTempRegistry</code> creates a temporary registry in the subdirectory of a temporary directory.
Such disposable registries are mainly used in sequential apply functions like <code><a href='btlapply.html'>btlapply</a></code>.
The base dir can be set via the option &#147;batchtools.temp.dir&#148; and defaults to <code><a href='http://www.inside-r.org/r-doc/base/tempfile'>tempdir</a></code>.</p>
  
      <p><code>saveRegistry</code> serializes the registry to the file system and be be loaded with <code>loadRegistry</code> by specifying the <code>file.dir</code>.
<code>syncRegisty</code> refreshes the registry by parsing update files from jobs.</p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'>reg = makeTempRegistry(make.default = FALSE)
</div>
<strong class='message'>Sourcing configuration file &#39;~/.batchtools.conf.r&#39; ...</strong>
<div class='input'>print(reg)
</div>
<div class='output'>Job Registry
  Number of Jobs: 0
  File dir: /tmp/RtmpCHvP0X/registry230960a7bf04
  Work dir: /home/lang/Projekte/batchtools
  Seed: 369749006
</div>
<div class='input'>
#&#39; Set debug mode
reg$debug = TRUE

# Set cluster functions to interactive mode (default)
reg$cluster.functions = makeClusterFunctionsInteractive()

# Change default packages
reg$packages = c(&quot;MASS&quot;)
saveRegistry(reg = reg)
</div>
<div class='output'>[1] TRUE
</div></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>Registry</li><li>clearDefaultRegistry</li><li>getDefaultRegistry</li><li>loadRegistry</li><li>makeRegistry</li><li>makeTempRegistry</li><li>saveRegistry</li><li>syncRegistry</li>
    </ul>
    <ul>
      
    </ul> -->
      
        
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="http://twitter.github.com/bootstrap">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>