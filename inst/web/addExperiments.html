<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>addExperiments. batchtools 0.1</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">batchtools 0.1</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Add Experiments to the Registry</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>addExperiments(prob.designs&nbsp;=&nbsp;NULL, algo.designs&nbsp;=&nbsp;NULL, repls&nbsp;=&nbsp;1L, combine&nbsp;=&nbsp;"crossprod", reg&nbsp;=&nbsp;getDefaultRegistry())</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>prob.designs</dt>
      <dd>[named list of <code><a href='http://www.inside-r.org/packages/cran/data.table/docs/data.table'>data.table</a></code> or <code><a href='http://www.inside-r.org/r-doc/base/data.frame'>data.frame</a></code>]
Named list of data frames. The name must match the problem name while the column names correspond to parameters
of the problem.
If <code>NULL</code>, adds experiments for all defined problems without any hyperparameters set.</dd>
      <dt>algo.designs</dt>
      <dd>[named list of <code><a href='http://www.inside-r.org/packages/cran/data.table/docs/data.table'>data.table</a></code> or <code><a href='http://www.inside-r.org/r-doc/base/data.frame'>data.frame</a></code>]
Named list of data frames. The name must match the algorithm name while the column names correspond to parameters
of the algorithm.
If <code>NULL</code>, adds experiments for all defined algorithms without any hyperparameters set.</dd>
      <dt>repls</dt>
      <dd>[<code>integer(1)</code>]
Number of replications for each distinct experiment.</dd>
      <dt>combine</dt>
      <dd>[<code>character(1)</code>]
How to combine the rows of a single problem design with the rows of a single algorithm design?
Default is &#147;crossprod&#148; which combines each row of the problem design which each row of the algorithm design
in a cross-product fashion. Set to &#147;bind&#148; to just <code><a href='http://www.inside-r.org/r-doc/base/cbind'>cbind</a></code> the tables of
problem and algorithm designs where the shorter table is repeated if necessary.</dd>
      <dt>reg</dt>
      <dd>[<code><a href='ExperimentRegistry.html'>ExperimentRegistry</a></code>]
Registry. If not explicitly passed, uses the last created registry.</dd>
    </dl>
    
    <div class="Value">
      <h2>Value</h2>

      <p><dl>
[<code><a href='http://www.inside-r.org/packages/cran/data.table/docs/data.table'>data.table</a></code>]. Generated job ids are stored in the column &#147;job.id&#148;.
  See <code><a href='JoinTables.html'>JoinTables</a></code> for examples on working with job tables.
</dl></p>
  
    </div>

    <div class="Description">
      <h2>Description</h2>

      <p>Adds experiments for running algorithms on problems to the registry and thereby defines batch jobs.
If multiple problem designs or algorithm designs are provided, they are combined via the Cartesian product.
E.g., if you have two problems <code>p1</code> and <code>p2</code> and three algorithms <code>a1</code>, <code>a2</code> and <code>a3</code>,
<code>addExperiments</code> creates experiments for the combinations <code>(p1, a1)</code>, <code>(p1, a2)</code>,
<code>(p1, a3)</code>, <code>(p2, a1)</code>, <code>(p2, a2)</code> and <code>(p2, a3)</code>.</p>
  
      <p>The combination of a single problem design with a single algorithm design (e.g., <code>p1, a1</code>) can be
controlled via the parameter <code>combine</code>.</p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'>reg = makeExperimentRegistry(file.dir = NA, make.default = FALSE)
</div>
<strong class='message'>Sourcing configuration file &#39;/home/lang/.batchtools.conf.R&#39; ...</strong>
<div class='input'>
# add first problem
fun = function(job, data, n, mean, sd, ...) rnorm(n, mean = mean, sd = sd)
addProblem(&quot;p1&quot;, fun = fun, reg = reg)

# add second problem
fun = function(job, data, n, lamba, ...) rexp(n, lambda = lambda)
addProblem(&quot;p2&quot;, fun = fun, reg = reg)


# add first algorithm
fun = function(instance, method, ...) if (method == &quot;mean&quot;) mean(instance) else median(instance)
addAlgorithm(&quot;a1&quot;, fun = fun, reg = reg)

# add second algorithm
fun = function(instance, ...) se(instance)
addAlgorithm(&quot;a2&quot;, reg = reg)

# define problem and algorithm designs
prob.designs = algo.designs = list()
prob.designs$p1 = expand.grid(n = 100, mean = -1:1, sd = 1:5)
prob.designs$p2 = data.table(lambda = 1:5)
algo.designs$a1 = data.table(method = c(&quot;mean&quot;, &quot;median&quot;))
algo.designs$a2 = data.table()

# add experiments
addExperiments(prob.designs, algo.designs, reg = reg)
</div>
<strong class='message'>Adding 30 experiments (&#39;p1&#39;[15] x &#39;a1&#39;[2] x repls[1]) ...</strong>
<strong class='message'>Adding 15 experiments (&#39;p1&#39;[15] x &#39;a2&#39;[1] x repls[1]) ...</strong>
<strong class='message'>Adding 10 experiments (&#39;p2&#39;[5] x &#39;a1&#39;[2] x repls[1]) ...</strong>
<strong class='message'>Adding 5 experiments (&#39;p2&#39;[5] x &#39;a2&#39;[1] x repls[1]) ...</strong>
<div class='input'>
# check what has been created
summarizeExperiments(reg = reg)
</div>
<div class='output'>   problem algorithm .count
1:      p1        a1     30
2:      p1        a2     15
3:      p2        a1     10
4:      p2        a2      5
</div>
<div class='input'>getJobPars(reg = reg)
</div>
<div class='output'>    job.id problem algorithm   n mean sd method lambda
 1:      1      p1        a1 100   -1  1   mean     NA
 2:      2      p1        a1 100   -1  1 median     NA
 3:      3      p1        a1 100    0  1   mean     NA
 4:      4      p1        a1 100    0  1 median     NA
 5:      5      p1        a1 100    1  1   mean     NA
 6:      6      p1        a1 100    1  1 median     NA
 7:      7      p1        a1 100   -1  2   mean     NA
 8:      8      p1        a1 100   -1  2 median     NA
 9:      9      p1        a1 100    0  2   mean     NA
10:     10      p1        a1 100    0  2 median     NA
11:     11      p1        a1 100    1  2   mean     NA
12:     12      p1        a1 100    1  2 median     NA
13:     13      p1        a1 100   -1  3   mean     NA
14:     14      p1        a1 100   -1  3 median     NA
15:     15      p1        a1 100    0  3   mean     NA
16:     16      p1        a1 100    0  3 median     NA
17:     17      p1        a1 100    1  3   mean     NA
18:     18      p1        a1 100    1  3 median     NA
19:     19      p1        a1 100   -1  4   mean     NA
20:     20      p1        a1 100   -1  4 median     NA
21:     21      p1        a1 100    0  4   mean     NA
22:     22      p1        a1 100    0  4 median     NA
23:     23      p1        a1 100    1  4   mean     NA
24:     24      p1        a1 100    1  4 median     NA
25:     25      p1        a1 100   -1  5   mean     NA
26:     26      p1        a1 100   -1  5 median     NA
27:     27      p1        a1 100    0  5   mean     NA
28:     28      p1        a1 100    0  5 median     NA
29:     29      p1        a1 100    1  5   mean     NA
30:     30      p1        a1 100    1  5 median     NA
31:     31      p1        a2 100   -1  1     NA     NA
32:     32      p1        a2 100    0  1     NA     NA
33:     33      p1        a2 100    1  1     NA     NA
34:     34      p1        a2 100   -1  2     NA     NA
35:     35      p1        a2 100    0  2     NA     NA
36:     36      p1        a2 100    1  2     NA     NA
37:     37      p1        a2 100   -1  3     NA     NA
38:     38      p1        a2 100    0  3     NA     NA
39:     39      p1        a2 100    1  3     NA     NA
40:     40      p1        a2 100   -1  4     NA     NA
41:     41      p1        a2 100    0  4     NA     NA
42:     42      p1        a2 100    1  4     NA     NA
43:     43      p1        a2 100   -1  5     NA     NA
44:     44      p1        a2 100    0  5     NA     NA
45:     45      p1        a2 100    1  5     NA     NA
46:     46      p2        a1  NA   NA NA   mean      1
47:     47      p2        a1  NA   NA NA median      1
48:     48      p2        a1  NA   NA NA   mean      2
49:     49      p2        a1  NA   NA NA median      2
50:     50      p2        a1  NA   NA NA   mean      3
51:     51      p2        a1  NA   NA NA median      3
52:     52      p2        a1  NA   NA NA   mean      4
53:     53      p2        a1  NA   NA NA median      4
54:     54      p2        a1  NA   NA NA   mean      5
55:     55      p2        a1  NA   NA NA median      5
56:     56      p2        a2  NA   NA NA     NA      1
57:     57      p2        a2  NA   NA NA     NA      2
58:     58      p2        a2  NA   NA NA     NA      3
59:     59      p2        a2  NA   NA NA     NA      4
60:     60      p2        a2  NA   NA NA     NA      5
    job.id problem algorithm   n mean sd method lambda
</div></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>addExperiments</li>
    </ul>
    <ul>
      
    </ul> -->
      
    <h2>See also</h2>
    
Other Experiment: <code><a href='ExperimentRegistry.html'>ExperimentRegistry</a></code>,
  <code><a href='removeExperiments.html'>removeExperiments</a></code>,
  <code><a href='summarizeExperiments.html'>summarizeExperiments</a></code>

        
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="https://getbootstrap.com/2.0.4/">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>