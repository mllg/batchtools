<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>ExperimentRegistry. batchtools 0.1</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">batchtools 0.1</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>ExperimentRegistry Constructor</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>makeExperimentRegistry(file.dir&nbsp;=&nbsp;"registry", work.dir&nbsp;=&nbsp;getwd(), conf.file&nbsp;=&nbsp;"~/.batchtools.conf.r", packages&nbsp;=&nbsp;character(0L), namespaces&nbsp;=&nbsp;character(0L), source&nbsp;=&nbsp;character(0L), load&nbsp;=&nbsp;character(0L), seed&nbsp;=&nbsp;NULL, make.default&nbsp;=&nbsp;TRUE)</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>file.dir</dt>
      <dd>[<code>character(1)</code>]
  Path where all files of the registry are saved.
  Default is directory &#147;registry&#148; in the current working directory.

  If you pass <code>NA</code>, a temporary directory will be used.
  This way, you can create disposable registries for <code><a href='btlapply.html'>btlapply</a></code> or examples.
  By default, the temporary directory <code><a href='http://www.inside-r.org/r-doc/base/tempfile'>tempdir</a>()</code> will be used.
  If you want to use another temp directory, e.g. a directory which is shared between nodes,
  you can set it in your configuration via <code>temp.dir</code>.</dd>
      <dt>work.dir</dt>
      <dd>[<code>character(1)</code>]
Working directory for R process when experiment is executed.
For <code>makeRegistry</code>, this defaults to the current working directory.
<code>loadRegistry</code> uses the stored <code>work.dir</code>, but you may also explicitly provide one
yourself.</dd>
      <dt>conf.file</dt>
      <dd>[<code>character(1)</code>]
Path to a configuration file which is sourced directly after the registry is created.
For example, you can set system-specific cluster functions in it.
The script is executed inside the registry environment, thus you can directly set
all slots, e.g. &#147;debug = TRUE&#148; would overwrite the debug flag of the registry.</dd>
      <dt>packages</dt>
      <dd>[<code>character</code>]
Packages that will always be loaded on each node.
Uses <code><a href='http://www.inside-r.org/r-doc/base/library'>require</a></code> internally.
Default is <code>character(0)</code>.</dd>
      <dt>namespaces</dt>
      <dd>[<code>character</code>]
Same as <code>packages</code>, but the packages will not be attached.
Uses <code><a href='http://www.inside-r.org/r-doc/base/ns-load'>requireNamespace</a></code> internally.
Default is <code>character(0)</code>.</dd>
      <dt>source</dt>
      <dd>[<code>character</code>]
Files which should be sourced on the slaves prior to executing a job.
Calls <code><a href='http://www.inside-r.org/r-doc/base/sys.source'>sys.source</a></code> using the <code><a href='http://www.inside-r.org/r-doc/base/environment'>.GlobalEnv</a></code>.</dd>
      <dt>load</dt>
      <dd>[<code>character</code>]
Files which should be loaded on the slaves prior to executing a job.
Calls <code><a href='http://www.inside-r.org/r-doc/base/load'>load</a></code> using the <code><a href='http://www.inside-r.org/r-doc/base/environment'>.GlobalEnv</a></code>.</dd>
      <dt>seed</dt>
      <dd>[<code>integer(1)</code>]
Start seed for jobs. Each job uses the (<code>seed</code> + <code>job.id</code>) as seed.
Default is a random number in the range [1, <code>.Machine$integer.max/2</code>].</dd>
      <dt>make.default</dt>
      <dd>[<code>logical(1)</code>]
If set to <code>TRUE</code>, the created registry is saved inside the package
namespace and acts as default registry. You might want to switch this
off if you work with multiple registries simultaneously.
Default is <code>TRUE</code>.</dd>
    </dl>
    
    <div class="Value">
      <h2>Value</h2>

      <p><dl>
[<code>ExperimentRegistry</code>].
</dl></p>
  
    </div>

    <div class="Description">
      <h2>Description</h2>

      <p><code>makeExperimentRegistry</code> constructs a special <code><a href='Registry.html'>Registry</a></code> which
is suitable for the definition of large scale computer experiments.</p>
  
      <p>Each experiments consists of a <code><a href='ProblemAlgorithm.html'>Problem</a></code> and an <code><a href='ProblemAlgorithm.html'>Algorithm</a></code>.
These can be parametrized with <code><a href='addExperiments.html'>addExperiments</a></code> to actually define computational
jobs.</p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'>reg = makeExperimentRegistry(file.dir = NA, make.default = FALSE)
</div>
<strong class='message'>Sourcing configuration file &#39;~/.batchtools.conf.r&#39; ...</strong>
<div class='input'>addProblem(reg = reg, &quot;p1&quot;,
  fun = function(job, data, n, mean, sd, ...) rnorm(n, mean = mean, sd = sd))
addAlgorithm(reg = reg, &quot;a1&quot;, fun = function(job, data, instance, ...) mean(instance))
addExperiments(reg = reg, list(p1 = CJ(n = 100, mean = -3:3, sd = 1:5)), list(a1 = data.table()))
</div>
<strong class='message'>Adding 35 experiments (&#39;p1&#39;[35] x &#39;a1&#39;[1] x repls[1]) ...</strong>
<div class='input'>submitJobs(reg = reg)
</div>
<strong class='message'>Submitting 35 jobs in 35 chunks using cluster functions &#39;Interactive&#39; ...</strong>
<strong class='message'>Syncing 35 files ...</strong>
<div class='input'>waitForJobs(reg = reg)
</div>
<div class='output'>[1] TRUE
</div>
<div class='input'>
# Reduce the results
reduceResults(reg = reg, fun = function(aggr, res, ...) c(aggr, res))
</div>
<div class='output'> [1] -3.03587354 -2.91509961 -2.91143965 -3.33238073 -3.47551091 -1.78451574
 [7] -2.07752164 -2.35169585 -2.16933354 -1.87542112 -1.02331883 -1.00666013
[13] -0.85237764 -1.36493975 -1.51177542 -0.13729710  0.05387641 -0.32177069
[19] -0.28313857  0.03627064  0.96911123  1.22220896  0.90879710  1.52624735
[25]  1.27919402  1.99823579  2.40588986  2.32499372  2.24934084  1.78786894
[31]  3.02347711  3.10466891  2.71445717  3.05156371  3.72809941
</div>
<div class='input'>
# Join info table with results
ids = findDone(reg = reg)
tab = getJobPars(reg = reg, ids = ids)
res = reduceResultsDataTable(reg = reg, ids = ids)
tab[res]
</div>
<div class='output'>    job.id problem algorithm   n mean sd          V1
 1:      1      p1        a1 100   -3  1 -3.03587354
 2:      2      p1        a1 100   -3  2 -2.91509961
 3:      3      p1        a1 100   -3  3 -2.91143965
 4:      4      p1        a1 100   -3  4 -3.33238073
 5:      5      p1        a1 100   -3  5 -3.47551091
 6:      6      p1        a1 100   -2  1 -1.78451574
 7:      7      p1        a1 100   -2  2 -2.07752164
 8:      8      p1        a1 100   -2  3 -2.35169585
 9:      9      p1        a1 100   -2  4 -2.16933354
10:     10      p1        a1 100   -2  5 -1.87542112
11:     11      p1        a1 100   -1  1 -1.02331883
12:     12      p1        a1 100   -1  2 -1.00666013
13:     13      p1        a1 100   -1  3 -0.85237764
14:     14      p1        a1 100   -1  4 -1.36493975
15:     15      p1        a1 100   -1  5 -1.51177542
16:     16      p1        a1 100    0  1 -0.13729710
17:     17      p1        a1 100    0  2  0.05387641
18:     18      p1        a1 100    0  3 -0.32177069
19:     19      p1        a1 100    0  4 -0.28313857
20:     20      p1        a1 100    0  5  0.03627064
21:     21      p1        a1 100    1  1  0.96911123
22:     22      p1        a1 100    1  2  1.22220896
23:     23      p1        a1 100    1  3  0.90879710
24:     24      p1        a1 100    1  4  1.52624735
25:     25      p1        a1 100    1  5  1.27919402
26:     26      p1        a1 100    2  1  1.99823579
27:     27      p1        a1 100    2  2  2.40588986
28:     28      p1        a1 100    2  3  2.32499372
29:     29      p1        a1 100    2  4  2.24934084
30:     30      p1        a1 100    2  5  1.78786894
31:     31      p1        a1 100    3  1  3.02347711
32:     32      p1        a1 100    3  2  3.10466891
33:     33      p1        a1 100    3  3  2.71445717
34:     34      p1        a1 100    3  4  3.05156371
35:     35      p1        a1 100    3  5  3.72809941
    job.id problem algorithm   n mean sd          V1
</div></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>ExperimentRegistry</li><li>makeExperimentRegistry</li>
    </ul>
    <ul>
      
    </ul> -->
      
    <h2>See also</h2>
    
Other Experiment: <code><a href='addExperiments.html'>addExperiments</a></code>,
  <code><a href='removeExperiments.html'>removeExperiments</a></code>,
  <code><a href='summarizeExperiments.html'>summarizeExperiments</a></code>

        
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="https://getbootstrap.com/2.0.4/">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>