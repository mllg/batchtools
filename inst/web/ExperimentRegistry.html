<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>ExperimentRegistry. batchtools 0.1</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="#">batchtools 0.1</a>
      <div class="nav">
        <ul class="nav">
          <li><a href="index.html"><i class="icon-home icon-white"></i> Index</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>ExperimentRegistry Constructor</h1>

<div class="row">
  <div class="span8">
    <h2>Usage</h2>
    <pre><div>makeExperimentRegistry(file.dir&nbsp;=&nbsp;"registry", work.dir&nbsp;=&nbsp;getwd(), conf.file&nbsp;=&nbsp;"~/.batchtools.conf.R", packages&nbsp;=&nbsp;character(0L), namespaces&nbsp;=&nbsp;character(0L), source&nbsp;=&nbsp;character(0L), load&nbsp;=&nbsp;character(0L), seed&nbsp;=&nbsp;NULL, make.default&nbsp;=&nbsp;TRUE)</div></pre>
    
    <h2>Arguments</h2>
    <dl>
      <dt>file.dir</dt>
      <dd>[<code>character(1)</code>]
  Path where all files of the registry are saved.
  Default is directory &#147;registry&#148; in the current working directory.

  If you pass <code>NA</code>, a temporary directory will be used.
  This way, you can create disposable registries for <code><a href='btlapply.html'>btlapply</a></code> or examples.
  By default, the temporary directory <code><a href='http://www.inside-r.org/r-doc/base/tempfile'>tempdir</a>()</code> will be used.
  If you want to use another directory, e.g. a directory which is shared between nodes,
  you can set it in your configuration file by setting the variable <code>temp.dir</code>.</dd>
      <dt>work.dir</dt>
      <dd>[<code>character(1)</code>]
Working directory for R process when experiment is executed.
For <code>makeRegistry</code>, this defaults to the current working directory.
<code>loadRegistry</code> uses the stored <code>work.dir</code>, but you may also explicitly provide one
yourself.</dd>
      <dt>conf.file</dt>
      <dd>[<code>character(1)</code>]
Path to a configuration file which is sourced directly after the registry is created.
For example, you can set system-specific cluster functions in it.
The script is executed inside the registry environment, thus you can directly set
all slots, e.g. <code>default.resources = list(walltime = 3600)</code> to set default resources.</dd>
      <dt>packages</dt>
      <dd>[<code>character</code>]
Packages that will always be loaded on each node.
Uses <code><a href='http://www.inside-r.org/r-doc/base/library'>require</a></code> internally.
Default is <code>character(0)</code>.
Note that you can also set <code>default.packages</code> in your config.
These are then merged with the packages specified via <code>packages</code> during construction of the registry.</dd>
      <dt>namespaces</dt>
      <dd>[<code>character</code>]
Same as <code>packages</code>, but the packages will not be attached.
Uses <code><a href='http://www.inside-r.org/r-doc/base/ns-load'>requireNamespace</a></code> internally.
Default is <code>character(0)</code>.</dd>
      <dt>source</dt>
      <dd>[<code>character</code>]
Files which should be sourced on the slaves prior to executing a job.
Calls <code><a href='http://www.inside-r.org/r-doc/base/sys.source'>sys.source</a></code> using the <code><a href='http://www.inside-r.org/r-doc/base/environment'>.GlobalEnv</a></code>.</dd>
      <dt>load</dt>
      <dd>[<code>character</code>]
Files which should be loaded on the slaves prior to executing a job.
Calls <code><a href='http://www.inside-r.org/r-doc/base/load'>load</a></code> using the <code><a href='http://www.inside-r.org/r-doc/base/environment'>.GlobalEnv</a></code>.</dd>
      <dt>seed</dt>
      <dd>[<code>integer(1)</code>]
Start seed for jobs. Each job uses the (<code>seed</code> + <code>job.id</code>) as seed.
Default is a random number in the range [1, <code>.Machine$integer.max/2</code>].</dd>
      <dt>make.default</dt>
      <dd>[<code>logical(1)</code>]
If set to <code>TRUE</code>, the created registry is saved inside the package
namespace and acts as default registry. You might want to switch this
off if you work with multiple registries simultaneously.
Default is <code>TRUE</code>.</dd>
    </dl>
    
    <div class="Value">
      <h2>Value</h2>

      <p><dl>
[<code>ExperimentRegistry</code>].
</dl></p>
  
    </div>

    <div class="Description">
      <h2>Description</h2>

      <p><code>makeExperimentRegistry</code> constructs a special <code><a href='Registry.html'>Registry</a></code> which
is suitable for the definition of large scale computer experiments.</p>
  
      <p>Each experiments consists of a <code><a href='ProblemAlgorithm.html'>Problem</a></code> and an <code><a href='ProblemAlgorithm.html'>Algorithm</a></code>.
These can be parametrized with <code><a href='addExperiments.html'>addExperiments</a></code> to actually define computational
jobs.</p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'>reg = makeExperimentRegistry(file.dir = NA, make.default = FALSE)
</div>
<strong class='message'>Sourcing configuration file &#39;~/.batchtools.conf.R&#39; ...</strong>
<div class='input'>addProblem(reg = reg, &quot;p1&quot;,
  fun = function(job, data, n, mean, sd, ...) rnorm(n, mean = mean, sd = sd))
addAlgorithm(reg = reg, &quot;a1&quot;, fun = function(job, data, instance, ...) mean(instance))
addExperiments(reg = reg, list(p1 = CJ(n = 100, mean = -3:3, sd = 1:5)), list(a1 = data.table()))
</div>
<strong class='message'>Adding 35 experiments (&#39;p1&#39;[35] x &#39;a1&#39;[1] x repls[1]) ...</strong>
<div class='input'>submitJobs(reg = reg)
</div>
<strong class='message'>Submitting 35 jobs in 35 chunks using cluster functions &#39;Interactive&#39; ...</strong>
<strong class='message'>Syncing 35 files ...</strong>
<div class='input'>waitForJobs(reg = reg)
</div>
<div class='output'>[1] TRUE
</div>
<div class='input'>
# Reduce the results
reduceResults(reg = reg, fun = function(aggr, res, ...) c(aggr, res))
</div>
<div class='output'> [1] -3.05445811 -3.19815853 -2.93910291 -2.54997991 -1.46969635 -1.85334550
 [7] -2.43322612 -1.74822793 -2.78446044 -1.07475440 -0.96314323 -0.94282451
[13] -0.96205698 -1.12469007 -1.32541544 -0.08491710  0.02939391  0.96298113
[19]  0.11175976 -0.25497481  1.13003424  0.88437493  1.07774628  0.95811621
[25]  1.49344319  1.89632382  2.01701266  2.00957688  2.51120856  1.99731488
[31]  2.91297329  2.92770473  2.76441025  3.23700564  3.73091357
</div>
<div class='input'>
# Join info table with results
ids = findDone(reg = reg)
tab = getJobPars(reg = reg, ids = ids)
res = reduceResultsDataTable(reg = reg, ids = ids)
tab[res]
</div>
<div class='output'>    job.id problem algorithm   n mean sd          V1
 1:      1      p1        a1 100   -3  1 -3.05445811
 2:      2      p1        a1 100   -3  2 -3.19815853
 3:      3      p1        a1 100   -3  3 -2.93910291
 4:      4      p1        a1 100   -3  4 -2.54997991
 5:      5      p1        a1 100   -3  5 -1.46969635
 6:      6      p1        a1 100   -2  1 -1.85334550
 7:      7      p1        a1 100   -2  2 -2.43322612
 8:      8      p1        a1 100   -2  3 -1.74822793
 9:      9      p1        a1 100   -2  4 -2.78446044
10:     10      p1        a1 100   -2  5 -1.07475440
11:     11      p1        a1 100   -1  1 -0.96314323
12:     12      p1        a1 100   -1  2 -0.94282451
13:     13      p1        a1 100   -1  3 -0.96205698
14:     14      p1        a1 100   -1  4 -1.12469007
15:     15      p1        a1 100   -1  5 -1.32541544
16:     16      p1        a1 100    0  1 -0.08491710
17:     17      p1        a1 100    0  2  0.02939391
18:     18      p1        a1 100    0  3  0.96298113
19:     19      p1        a1 100    0  4  0.11175976
20:     20      p1        a1 100    0  5 -0.25497481
21:     21      p1        a1 100    1  1  1.13003424
22:     22      p1        a1 100    1  2  0.88437493
23:     23      p1        a1 100    1  3  1.07774628
24:     24      p1        a1 100    1  4  0.95811621
25:     25      p1        a1 100    1  5  1.49344319
26:     26      p1        a1 100    2  1  1.89632382
27:     27      p1        a1 100    2  2  2.01701266
28:     28      p1        a1 100    2  3  2.00957688
29:     29      p1        a1 100    2  4  2.51120856
30:     30      p1        a1 100    2  5  1.99731488
31:     31      p1        a1 100    3  1  2.91297329
32:     32      p1        a1 100    3  2  2.92770473
33:     33      p1        a1 100    3  3  2.76441025
34:     34      p1        a1 100    3  4  3.23700564
35:     35      p1        a1 100    3  5  3.73091357
    job.id problem algorithm   n mean sd          V1
</div></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>ExperimentRegistry</li><li>makeExperimentRegistry</li>
    </ul>
    <ul>
      
    </ul> -->
      
    <h2>See also</h2>
    
Other Experiment: <code><a href='addExperiments.html'>addExperiments</a></code>,
  <code><a href='removeExperiments.html'>removeExperiments</a></code>,
  <code><a href='summarizeExperiments.html'>summarizeExperiments</a></code>

        
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="https://getbootstrap.com/2.0.4/">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>