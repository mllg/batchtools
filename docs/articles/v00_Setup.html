<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Setup for batchtools â€¢ batchtools</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">batchtools</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mllg/batchtools">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Setup for batchtools</h1>
            
          </div>

    
    
<div class="contents">
<div id="cluster-functions" class="section level1">
<h1 class="hasAnchor">
<html><body><a href="#cluster-functions" class="anchor"> </a></body></html>Cluster Functions</h1>
<p>The communication with the batch system is managed via so-called cluster functions. They are created with the constructor <a href="https://mllg.github.io/batchtools/reference/makeClusterFunctions">makeClusterFunctions</a> which defines how jobs are submitted on your system. Furthermore, you may provide functions to list queued/running jobs and to kill jobs.</p>
<p>Usually you do not have to start from scratch but can just use one of the cluster functions which ship with the package:</p>
<ul>
<li>Interactive Cluster Functions (default): <a href="https://mllg.github.io/batchtools/reference/makeClusterFunctionsInteractive">docs</a>, <a href="https://github.com/mllg/batchtools/blob/master/R/clusterFunctionsInteractive.R">implementation</a>
</li>
<li>Multicore Cluster Functions: <a href="https://mllg.github.io/batchtools/reference/makeClusterFunctionsMulticore">docs</a>, <a href="https://github.com/mllg/batchtools/blob/master/R/clusterFunctionsMulticore.R">implementation</a>
</li>
<li>Socket Cluster Functions: <a href="https://mllg.github.io/batchtools/reference/makeClusterFunctionsSocket">docs</a>, <a href="https://github.com/mllg/batchtools/blob/master/R/clusterFunctionsSocket.R">implementation</a>
</li>
<li>Makeshift SSH cluster: <a href="https://mllg.github.io/batchtools/reference/makeClusterFunctionsSSH">docs</a>, <a href="https://github.com/mllg/batchtools/blob/master/R/clusterFunctionsSSH.R">implementation</a>
</li>
<li>DockerSwarm: <a href="https://mllg.github.io/batchtools/reference/makeClusterFunctionsDocker">docs</a>, <a href="https://github.com/mllg/batchtools/blob/master/R/clusterFunctionsDocker.R">implementation</a>
</li>
<li>IBM Spectrum Load Sharing Facility (LSF): <a href="https://mllg.github.io/batchtools/reference/makeClusterFunctionsLSF">docs</a>, <a href="https://github.com/mllg/batchtools/blob/master/R/clusterFunctionsLSF.R">implementation</a>
</li>
<li>OpenLava: <a href="https://mllg.github.io/batchtools/reference/makeClusterFunctionsOpenLava">docs</a>, <a href="https://github.com/mllg/batchtools/blob/master/R/clusterFunctionsOpenLava.R">implementation</a>
</li>
<li>Univia Grid Engine / Oracle Grid Engine (OGE) / Sun Grid Engine (SGE): <a href="https://mllg.github.io/batchtools/reference/makeClusterFunctionsSGE">docs</a>, <a href="https://github.com/mllg/batchtools/blob/master/R/clusterFunctionsSGE.R">implementation</a>
</li>
<li>Slurm: <a href="https://mllg.github.io/batchtools/reference/makeClusterFunctionsSlurm">docs</a>, <a href="https://github.com/mllg/batchtools/blob/master/R/clusterFunctionsSlurm.R">implementation</a>
</li>
<li>Torque/OpenPBS: <a href="https://mllg.github.io/batchtools/reference/makeClusterFunctionsTorque">docs</a>, <a href="https://github.com/mllg/batchtools/blob/master/R/clusterFunctionsTorque.R">implementation</a>
</li>
</ul>
<p>To use the package with the socket cluster functions, you would call the respective constructor <a href="https://mllg.github.io/batchtools/reference/makeClusterFunctionsSocket">makeClusterFunctionsSocket()</a>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg =<span class="st"> </span><span class="kw"><a href="../reference/makeRegistry.html">makeRegistry</a></span>(<span class="ot">NA</span>)</code></pre></div>
<pre><code>## Sourcing configuration file '/home/michel/.config/batchtools/config.R' ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg$cluster.functions =<span class="st"> </span><span class="kw"><a href="../reference/makeClusterFunctionsSocket.html">makeClusterFunctionsSocket</a></span>(<span class="dv">2</span>)</code></pre></div>
<p>To make this selection permanent for this registry, save the Registry with <a href="https://mllg.github.io/batchtools/reference/makeRegistry">saveRegistry</a>. To make your cluster function selection permanent for a specific system across R sessions for all new Registries, you can set up a configuration file (see below).</p>
<p>If you have trouble debugging your cluster functions, you can enable the debug mode for extra output. To do so, install the <a href="https://cran.r-project.org/package=debugme">debugme package</a> and set the environment variable <code>DEBUGME</code> to <code>batchtools</code> before you load the <code>batchtools</code> package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Sys.setenv</span>(<span class="dt">DEBUGME =</span> <span class="st">"batchtools"</span>)
<span class="kw">library</span>(batchtools)</code></pre></div>
</div>
<div id="template-files" class="section level1">
<h1 class="hasAnchor">
<html><body><a href="#template-files" class="anchor"> </a></body></html>Template files</h1>
<p>Many cluster functions require a template file as argument. These templates are used to communicate with the scheduler and contain placeholders to evaluate arbitrary R expressions. Internally, the <a href="https://cran.r-project.org/package=brew">brew package</a> is used for this purpose. Some exemplary template files can be found <a href="https://github.com/mllg/batchtools/tree/master/inst/templates">here</a>. It would be great if you would help expand this collection to cover more exotic configurations. To do so, please send your template via <a href="mailto:michellang@gmail.com">mail</a> or open a new pull request.</p>
<p>Note that all variables defined in a <a href="https://mllg.github.io/batchtools/reference/JobCollection">JobCollection</a> can be used inside the template. If you need to pass extra variables, you can set them via the argument <code>resources</code> of <a href="https://mllg.github.io/batchtools/reference/submitJobs">submitJobs</a>.</p>
<p>If the flexibility which comes with templating is not sufficient, you can still construct a custom cluster function implementation yourself using the provided <a href="https://mllg.github.io/batchtools/reference/makeClusterFunctions">constructor</a>.</p>
</div>
<div id="configuration-file" class="section level1">
<h1 class="hasAnchor">
<html><body><a href="#configuration-file" class="anchor"> </a></body></html>Configuration file</h1>
<p>The configuration file can be used to set system specific options. Its default location depends on the operating system (see <a href="https://mllg.github.io/batchtools/reference/makeRegistry">Registry</a>), but for the first time setup you can put one in the current working directory (as reported by <code>getwd()</code>). In order to set the cluster function implementation, you would generate a file with the following content:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cluster.functions =<span class="st"> </span><span class="kw"><a href="../reference/makeClusterFunctionsInteractive.html">makeClusterFunctionsInteractive</a></span>()</code></pre></div>
<p>The configuration file is parsed whenever you create or load a <a href="https://mllg.github.io/batchtools/reference/makeRegistry">Registry</a>. It is sourced inside of your registry which has the advantage that you can (a) access all of the parameters which are passed to <a href="https://mllg.github.io/batchtools/reference/makeRegistry">makeRegistry</a> and (b) you can also directly change them. Lets say you always want your working directory in your home directory and you always want to load the <code>checkmate</code> package on the nodes, you can just append these lines:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">work.dir =<span class="st"> "~"</span>
packages =<span class="st"> </span><span class="kw">union</span>(packages, <span class="st">"checkmate"</span>)</code></pre></div>
<p>See the documentation on <a href="https://mllg.github.io/batchtools/reference/makeRegistry">Registry</a> for a more complete list of supported configuration options.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#cluster-functions">Cluster Functions</a></li>
      <li><a href="#template-files">Template files</a></li>
      <li><a href="#configuration-file">Configuration file</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Michel Lang, Bernd Bischl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
