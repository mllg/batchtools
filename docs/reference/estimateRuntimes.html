<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Estimate Remaining Runtimes — estimateRuntimes • batchtools</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Estimate Remaining Runtimes — estimateRuntimes" />

<meta property="og:description" content="Estimates the runtimes of jobs using the random forest implemented in ranger.
Observed runtimes are retrieved from the Registry and runtimes are
predicted for unfinished jobs.
The estimated remaining time is calculated in the print method.
You may also pass n here to determine the number of parallel jobs which is then used
in a simple Longest Processing Time (LPT) algorithm to give an estimate for the parallel runtime." />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">batchtools</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.9.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/batchtools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mllg/batchtools">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimate Remaining Runtimes</h1>
    <small>Source: <a href='https://github.com/mllg/batchtools/blob/master/R/estimateRuntimes.R'><code>R/estimateRuntimes.R</code></a></small>
    </div>

    
    <p>Estimates the runtimes of jobs using the random forest implemented in <span class="pkg">ranger</span>.
Observed runtimes are retrieved from the <code><a href='makeRegistry.html'>Registry</a></code> and runtimes are
predicted for unfinished jobs.</p>
<p>The estimated remaining time is calculated in the <code>print</code> method.
You may also pass <code>n</code> here to determine the number of parallel jobs which is then used
in a simple Longest Processing Time (LPT) algorithm to give an estimate for the parallel runtime.</p>
    

    <pre class="usage"><span class='fu'>estimateRuntimes</span>(<span class='no'>tab</span>, <span class='no'>...</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='fu'><a href='getDefaultRegistry.html'>getDefaultRegistry</a></span>())

<span class='co'># S3 method for RuntimeEstimate</span>
<span class='fu'>print</span>(<span class='no'>x</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>tab</th>
      <td><p>[<code>data.table</code>]<br />
Table with column &#8220;job.id&#8221; and additional columns to predict the runtime.
Observed runtimes will be looked up in the registry and serve as dependent variable.
All columns in <code>tab</code> except &#8220;job.id&#8221; will be passed to <code><a href='http://www.rdocumentation.org/packages/ranger/topics/ranger'>ranger</a></code> as
independent variables to fit the model.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>[ANY]<br />
Additional parameters passed to <code><a href='http://www.rdocumentation.org/packages/ranger/topics/ranger'>ranger</a></code>. Ignored for the <code>print</code> method.</p></td>
    </tr>
    <tr>
      <th>reg</th>
      <td><p>[<code><a href='makeRegistry.html'>Registry</a></code>]<br />
Registry. If not explicitly passed, uses the default registry (see <code><a href='getDefaultRegistry.html'>setDefaultRegistry</a></code>).</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>[<code>RuntimeEstimate</code>]<br />
Object to print.</p></td>
    </tr>
    <tr>
      <th>n</th>
      <td><p>[<code>integer(1)</code>]<br />
Number of parallel jobs to assume for runtime estimation.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>[<code>RuntimeEstimate</code>] which is a <code>list</code> with two named elements:
 &#8220;runtimes&#8221; is a <code>data.table</code> with columns &#8220;job.id&#8221;,
 &#8220;runtime&#8221; (in seconds) and &#8220;type&#8221; (&#8220;estimated&#8221; if runtime is estimated,
 &#8220;observed&#8221; if runtime was observed).
 The other element of the list named &#8220;model&#8221;] contains the fitted random forest object.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='chunk.html'>binpack</a></code> and <code><a href='chunk.html'>lpt</a></code> to chunk jobs according to their estimated runtimes.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Create a simple toy registry</span>
<span class='fu'>set.seed</span>(<span class='fl'>1</span>)
<span class='no'>tmp</span> <span class='kw'>=</span> <span class='fu'><a href='makeExperimentRegistry.html'>makeExperimentRegistry</a></span>(<span class='kw'>file.dir</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>make.default</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='fl'>1</span>)</div><div class='output co'>#&gt; <span class='message'>No configuration file found</span></div><div class='output co'>#&gt; <span class='message'>Created registry in '/var/folders/pj/dcslzytj3t30v_ylpyyfyyl00000gn/T/batchtools-example/reg' using cluster functions 'Interactive'</span></div><div class='input'><span class='fu'><a href='addProblem.html'>addProblem</a></span>(<span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"iris"</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>iris</span>, <span class='kw'>fun</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>data</span>, <span class='no'>...</span>) <span class='fu'>nrow</span>(<span class='no'>data</span>), <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding problem 'iris'</span></div><div class='input'><span class='fu'><a href='addAlgorithm.html'>addAlgorithm</a></span>(<span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"nrow"</span>, <span class='kw'>function</span>(<span class='no'>instance</span>, <span class='no'>...</span>) <span class='fu'>nrow</span>(<span class='no'>instance</span>), <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding algorithm 'nrow'</span></div><div class='input'><span class='fu'><a href='addAlgorithm.html'>addAlgorithm</a></span>(<span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"ncol"</span>, <span class='kw'>function</span>(<span class='no'>instance</span>, <span class='no'>...</span>) <span class='fu'>ncol</span>(<span class='no'>instance</span>), <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding algorithm 'ncol'</span></div><div class='input'><span class='fu'><a href='addExperiments.html'>addExperiments</a></span>(<span class='kw'>algo.designs</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>nrow</span> <span class='kw'>=</span> <span class='fu'>CJ</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>50</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>5</span>])), <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding 250 experiments ('iris'[1] x 'nrow'[250] x repls[1]) ...</span></div><div class='input'><span class='fu'><a href='addExperiments.html'>addExperiments</a></span>(<span class='kw'>algo.designs</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fu'>CJ</span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>50</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>5</span>])), <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding 250 experiments ('iris'[1] x 'ncol'[250] x repls[1]) ...</span></div><div class='input'>
<span class='co'># We use the job parameters to predict runtimes</span>
<span class='no'>tab</span> <span class='kw'>=</span> <span class='fu'><a href='unwrap.html'>unwrap</a></span>(<span class='fu'><a href='getJobTable.html'>getJobPars</a></span>(<span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>))

<span class='co'># First we need to submit some jobs so that the forest can train on some data.</span>
<span class='co'># Thus, we just sample some jobs from the registry while grouping by factor variables.</span>
<span class='no'>ids</span> <span class='kw'>=</span> <span class='no'>tab</span>[, <span class='no'>.SD</span>[<span class='fu'>sample</span>(<span class='fu'>nrow</span>(<span class='no'>.SD</span>), <span class='fl'>5</span>)], <span class='kw'>by</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"problem"</span>, <span class='st'>"algorithm"</span>, <span class='st'>"y"</span>)]
<span class='fu'>setkeyv</span>(<span class='no'>ids</span>, <span class='st'>"job.id"</span>)
<span class='fu'><a href='submitJobs.html'>submitJobs</a></span>(<span class='no'>ids</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Submitting 50 jobs in 50 chunks using cluster functions 'Interactive' ...</span></div><div class='input'><span class='fu'><a href='waitForJobs.html'>waitForJobs</a></span>(<span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># We "simulate" some more realistic runtimes here to demonstrate the functionality:</span>
<span class='co'># - Algorithm "ncol" is 5 times more expensive than "nrow"</span>
<span class='co'># - x has no effect on the runtime</span>
<span class='co'># - If y is "a" or "b", the runtimes are really high</span>
<span class='no'>runtime</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>algorithm</span>, <span class='no'>x</span>, <span class='no'>y</span>) {
  <span class='fu'>ifelse</span>(<span class='no'>algorithm</span> <span class='kw'>==</span> <span class='st'>"nrow"</span>, <span class='fl'>100L</span>, <span class='fl'>500L</span>) + <span class='fl'>1000L</span> * (<span class='no'>y</span> <span class='kw'>%in%</span> <span class='no'>letters</span>[<span class='fl'>1</span>:<span class='fl'>2</span>])
}
<span class='no'>tmp</span>$<span class='no'>status</span>[<span class='no'>ids</span>, <span class='no'>done</span> <span class='kw'>:=</span> <span class='no'>done</span> + <span class='no'>tab</span>[<span class='no'>ids</span>, <span class='fu'>runtime</span>(<span class='no'>algorithm</span>, <span class='no'>x</span>, <span class='no'>y</span>)]]</div><div class='output co'>#&gt;      job.id def.id  submitted    started       done  error mem.used resource.id
#&gt;       &lt;int&gt;  &lt;int&gt;      &lt;num&gt;      &lt;num&gt;      &lt;num&gt; &lt;char&gt;    &lt;num&gt;       &lt;int&gt;
#&gt;   1:      1      1         NA         NA         NA     NA       NA          NA
#&gt;   2:      2      2         NA         NA         NA     NA       NA          NA
#&gt;   3:      3      3         NA         NA         NA     NA       NA          NA
#&gt;   4:      4      4 1521796108 1521796108 1521796208     NA       NA           1
#&gt;  ---                                                                           
#&gt; 496:    496    496         NA         NA         NA     NA       NA          NA
#&gt; 497:    497    497 1521796110 1521796110 1521797610     NA       NA           1
#&gt; 498:    498    498         NA         NA         NA     NA       NA          NA
#&gt; 499:    499    499         NA         NA         NA     NA       NA          NA
#&gt; 500:    500    500         NA         NA         NA     NA       NA          NA
#&gt;           batch.id log.file                            job.hash job.name  repl
#&gt;             &lt;char&gt;   &lt;char&gt;                              &lt;char&gt;   &lt;char&gt; &lt;int&gt;
#&gt;   1:            NA       NA                                  NA       NA     1
#&gt;   2:            NA       NA                                  NA       NA     1
#&gt;   3:            NA       NA                                  NA       NA     1
#&gt;   4: cfInteractive       NA job3dd73de2a199d4d2e7af96e104183530       NA     1
#&gt;  ---                                                                          
#&gt; 496:            NA       NA                                  NA       NA     1
#&gt; 497: cfInteractive       NA jobd8ea1d46e825a5997e01b9f9da8326bc       NA     1
#&gt; 498:            NA       NA                                  NA       NA     1
#&gt; 499:            NA       NA                                  NA       NA     1
#&gt; 500:            NA       NA                                  NA       NA     1</div><div class='input'><span class='fu'><a href='JoinTables.html'>rjoin</a></span>(<span class='fu'><a href='JoinTables.html'>sjoin</a></span>(<span class='no'>tab</span>, <span class='no'>ids</span>), <span class='fu'><a href='getJobTable.html'>getJobStatus</a></span>(<span class='no'>ids</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)[, <span class='fu'>c</span>(<span class='st'>"job.id"</span>, <span class='st'>"time.running"</span>)])</div><div class='output co'>#&gt;     job.id problem algorithm     x      y   time.running
#&gt;      &lt;int&gt;  &lt;char&gt;    &lt;char&gt; &lt;int&gt; &lt;char&gt;     &lt;difftime&gt;
#&gt;  1:      4    iris      nrow     1      d  100.0115 secs
#&gt;  2:     16    iris      nrow     4      a 1100.0281 secs
#&gt;  3:     34    iris      nrow     7      d  100.0109 secs
#&gt;  4:     41    iris      nrow     9      a 1100.0070 secs
#&gt;  5:     46    iris      nrow    10      a 1100.0110 secs
#&gt;  6:     48    iris      nrow    10      c  100.0117 secs
#&gt;  7:     69    iris      nrow    14      d  100.0067 secs
#&gt;  8:     85    iris      nrow    17      e  100.0081 secs
#&gt;  9:     89    iris      nrow    18      d  100.0070 secs
#&gt; 10:     94    iris      nrow    19      d  100.0102 secs
#&gt; 11:     97    iris      nrow    20      b 1100.0071 secs
#&gt; 12:     98    iris      nrow    20      c  100.0120 secs
#&gt; 13:    115    iris      nrow    23      e  100.0083 secs
#&gt; 14:    117    iris      nrow    24      b 1100.0082 secs
#&gt; 15:    120    iris      nrow    24      e  100.0090 secs
#&gt; 16:    145    iris      nrow    29      e  100.0070 secs
#&gt; 17:    148    iris      nrow    30      c  100.0099 secs
#&gt; 18:    156    iris      nrow    32      a 1100.0076 secs
#&gt; 19:    167    iris      nrow    34      b 1100.0083 secs
#&gt; 20:    187    iris      nrow    38      b 1100.0082 secs
#&gt; 21:    193    iris      nrow    39      c  100.0096 secs
#&gt; 22:    220    iris      nrow    44      e  100.0069 secs
#&gt; 23:    223    iris      nrow    45      c  100.0120 secs
#&gt; 24:    227    iris      nrow    46      b 1100.0067 secs
#&gt; 25:    246    iris      nrow    50      a 1100.0071 secs
#&gt; 26:    258    iris      ncol     2      c  500.0090 secs
#&gt; 27:    270    iris      ncol     4      e  500.0067 secs
#&gt; 28:    271    iris      ncol     5      a 1500.0092 secs
#&gt; 29:    275    iris      ncol     5      e  500.0103 secs
#&gt; 30:    296    iris      ncol    10      a 1500.0078 secs
#&gt; 31:    315    iris      ncol    13      e  500.0077 secs
#&gt; 32:    325    iris      ncol    15      e  500.0086 secs
#&gt; 33:    352    iris      ncol    21      b 1500.0089 secs
#&gt; 34:    354    iris      ncol    21      d  500.0078 secs
#&gt; 35:    358    iris      ncol    22      c  500.0097 secs
#&gt; 36:    364    iris      ncol    23      d  500.0080 secs
#&gt; 37:    370    iris      ncol    24      e  500.0092 secs
#&gt; 38:    378    iris      ncol    26      c  500.0076 secs
#&gt; 39:    388    iris      ncol    28      c  500.0101 secs
#&gt; 40:    402    iris      ncol    31      b 1500.0081 secs
#&gt; 41:    411    iris      ncol    33      a 1500.0100 secs
#&gt; 42:    419    iris      ncol    34      d  500.0084 secs
#&gt; 43:    432    iris      ncol    37      b 1500.0077 secs
#&gt; 44:    434    iris      ncol    37      d  500.0082 secs
#&gt; 45:    436    iris      ncol    38      a 1500.0092 secs
#&gt; 46:    438    iris      ncol    38      c  500.0071 secs
#&gt; 47:    447    iris      ncol    40      b 1500.0072 secs
#&gt; 48:    451    iris      ncol    41      a 1500.0112 secs
#&gt; 49:    454    iris      ncol    41      d  500.0073 secs
#&gt; 50:    497    iris      ncol    50      b 1500.0070 secs
#&gt;     job.id problem algorithm     x      y   time.running</div><div class='input'>
<span class='co'># Estimate runtimes:</span>
<span class='no'>est</span> <span class='kw'>=</span> <span class='fu'>estimateRuntimes</span>(<span class='no'>tab</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)
<span class='fu'>print</span>(<span class='no'>est</span>)</div><div class='output co'>#&gt; Runtime Estimate for 500 jobs with 1 CPUs
#&gt;   Done     : 0d 09h 43m 20.5s
#&gt;   Remaining: 3d 16h 23m 21.0s
#&gt;   Total    : 4d 02h 06m 41.5s</div><div class='input'><span class='fu'><a href='JoinTables.html'>rjoin</a></span>(<span class='no'>tab</span>, <span class='no'>est</span>$<span class='no'>runtimes</span>)</div><div class='output co'>#&gt;      job.id problem algorithm     x      y      type   runtime
#&gt;       &lt;int&gt;  &lt;char&gt;    &lt;char&gt; &lt;int&gt; &lt;char&gt;    &lt;fctr&gt;     &lt;num&gt;
#&gt;   1:      1    iris      nrow     1      a estimated 1043.1353
#&gt;   2:      2    iris      nrow     1      b estimated 1042.6340
#&gt;   3:      3    iris      nrow     1      c estimated  190.8529
#&gt;   4:      4    iris      nrow     1      d  observed  100.0115
#&gt;  ---                                                          
#&gt; 496:    496    iris      ncol    50      a estimated 1396.1413
#&gt; 497:    497    iris      ncol    50      b  observed 1500.0070
#&gt; 498:    498    iris      ncol    50      c estimated  596.3900
#&gt; 499:    499    iris      ncol    50      d estimated  572.4746
#&gt; 500:    500    iris      ncol    50      e estimated  560.1503</div><div class='input'><span class='fu'>print</span>(<span class='no'>est</span>, <span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>10</span>)</div><div class='output co'>#&gt; Runtime Estimate for 500 jobs with 10 CPUs
#&gt;   Done     : 0d 09h 43m 20.5s
#&gt;   Remaining: 3d 16h 23m 21.0s
#&gt;   Parallel : 0d 08h 51m 28.8s
#&gt;   Total    : 4d 02h 06m 41.5s</div><div class='input'>
<span class='co'># Submit jobs with longest runtime first:</span>
<span class='no'>ids</span> <span class='kw'>=</span> <span class='no'>est</span>$<span class='no'>runtimes</span>[<span class='no'>type</span> <span class='kw'>==</span> <span class='st'>"estimated"</span>][<span class='fu'>order</span>(<span class='no'>runtime</span>, <span class='kw'>decreasing</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)]
<span class='fu'>print</span>(<span class='no'>ids</span>)</div><div class='output co'>#&gt;      job.id      type   runtime
#&gt;       &lt;int&gt;    &lt;fctr&gt;     &lt;num&gt;
#&gt;   1:    446 estimated 1433.6250
#&gt;   2:    456 estimated 1424.6351
#&gt;   3:    431 estimated 1421.7917
#&gt;   4:    426 estimated 1421.5517
#&gt;  ---                           
#&gt; 446:     90 estimated  135.5263
#&gt; 447:     99 estimated  131.5583
#&gt; 448:     74 estimated  129.9317
#&gt; 449:     79 estimated  128.2873
#&gt; 450:     84 estimated  125.5806</div><span class='co'># NOT RUN {</span>
<span class='fu'><a href='submitJobs.html'>submitJobs</a></span>(<span class='no'>ids</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)
<span class='co'># }</span><div class='input'>
<span class='co'># Group jobs into chunks with runtime &lt; 1h</span>
<span class='no'>ids</span> <span class='kw'>=</span> <span class='no'>est</span>$<span class='no'>runtimes</span>[<span class='no'>type</span> <span class='kw'>==</span> <span class='st'>"estimated"</span>]
<span class='no'>ids</span>[, <span class='no'>chunk</span> <span class='kw'>:=</span> <span class='fu'><a href='chunk.html'>binpack</a></span>(<span class='no'>runtime</span>, <span class='fl'>3600</span>)]</div><div class='output co'>#&gt;      job.id      type   runtime chunk
#&gt;       &lt;int&gt;    &lt;fctr&gt;     &lt;num&gt; &lt;int&gt;
#&gt;   1:      1 estimated 1043.1353    75
#&gt;   2:      2 estimated 1042.6340    75
#&gt;   3:      3 estimated  190.8529    71
#&gt;   4:      5 estimated  195.5074     9
#&gt;  ---                                 
#&gt; 446:    495 estimated  560.1503    35
#&gt; 447:    496 estimated 1396.1413    12
#&gt; 448:    498 estimated  596.3900     6
#&gt; 449:    499 estimated  572.4746    21
#&gt; 450:    500 estimated  560.1503    36</div><div class='input'><span class='fu'>print</span>(<span class='no'>ids</span>)</div><div class='output co'>#&gt;      job.id      type   runtime chunk
#&gt;       &lt;int&gt;    &lt;fctr&gt;     &lt;num&gt; &lt;int&gt;
#&gt;   1:      1 estimated 1043.1353    75
#&gt;   2:      2 estimated 1042.6340    75
#&gt;   3:      3 estimated  190.8529    71
#&gt;   4:      5 estimated  195.5074     9
#&gt;  ---                                 
#&gt; 446:    495 estimated  560.1503    35
#&gt; 447:    496 estimated 1396.1413    12
#&gt; 448:    498 estimated  596.3900     6
#&gt; 449:    499 estimated  572.4746    21
#&gt; 450:    500 estimated  560.1503    36</div><div class='input'><span class='fu'>print</span>(<span class='no'>ids</span>[, <span class='fu'>list</span>(<span class='kw'>runtime</span> <span class='kw'>=</span> <span class='fu'>sum</span>(<span class='no'>runtime</span>)), <span class='kw'>by</span> <span class='kw'>=</span> <span class='no'>chunk</span>])</div><div class='output co'>#&gt;     chunk  runtime
#&gt;     &lt;int&gt;    &lt;num&gt;
#&gt;  1:    75 3599.300
#&gt;  2:    71 3532.549
#&gt;  3:     9 3599.464
#&gt;  4:    74 3599.323
#&gt;  5:    70 3548.379
#&gt;  6:     7 3599.944
#&gt;  7:    44 3598.583
#&gt;  8:    64 3596.812
#&gt;  9:    61 3599.720
#&gt; 10:    69 3557.232
#&gt; 11:    54 3599.277
#&gt; 12:    60 3596.218
#&gt; 13:    56 3599.375
#&gt; 14:    66 3580.744
#&gt; 15:    51 3474.894
#&gt; 16:    55 3599.865
#&gt; 17:    58 3582.460
#&gt; 18:    68 3571.211
#&gt; 19:    49 3493.625
#&gt; 20:    57 3592.257
#&gt; 21:     8 3597.088
#&gt; 22:    62 3599.961
#&gt; 23:    72 3513.739
#&gt; 24:    43 3592.660
#&gt; 25:     5 3599.052
#&gt; 26:    59 3579.823
#&gt; 27:     4 3598.902
#&gt; 28:    73 3482.661
#&gt; 29:    78 3550.890
#&gt; 30:     6 3597.690
#&gt; 31:    77 3565.749
#&gt; 32:    85 3514.238
#&gt; 33:    53 3599.707
#&gt; 34:    42 3599.734
#&gt; 35:    41 3599.321
#&gt; 36:    39 3599.329
#&gt; 37:    82 3583.411
#&gt; 38:     1 3599.048
#&gt; 39:    80 3494.831
#&gt; 40:    83 3563.280
#&gt; 41:    37 3599.654
#&gt; 42:    90 1271.974
#&gt; 43:    52 3599.799
#&gt; 44:    40 3599.960
#&gt; 45:    81 3470.098
#&gt; 46:    65 3586.757
#&gt; 47:    67 3573.733
#&gt; 48:     3 3598.243
#&gt; 49:    76 3582.451
#&gt; 50:     2 3599.591
#&gt; 51:    79 3525.475
#&gt; 52:    84 3547.442
#&gt; 53:    63 3599.643
#&gt; 54:    32 3488.498
#&gt; 55:    13 3595.863
#&gt; 56:    48 3501.245
#&gt; 57:    50 3479.767
#&gt; 58:    28 3513.630
#&gt; 59:    30 3500.774
#&gt; 60:    35 3481.031
#&gt; 61:    38 3471.187
#&gt; 62:    46 3517.254
#&gt; 63:    33 3487.501
#&gt; 64:    14 3599.622
#&gt; 65:    45 3597.069
#&gt; 66:    34 3485.333
#&gt; 67:    36 3477.041
#&gt; 68:    47 3506.486
#&gt; 69:    12 3599.451
#&gt; 70:    11 3598.856
#&gt; 71:    10 3599.948
#&gt; 72:    16 3599.690
#&gt; 73:    17 3588.430
#&gt; 74:    15 3598.620
#&gt; 75:    29 3508.412
#&gt; 76:    27 3519.659
#&gt; 77:    31 3497.117
#&gt; 78:    23 3555.930
#&gt; 79:    20 3569.205
#&gt; 80:    26 3539.969
#&gt; 81:    21 3567.367
#&gt; 82:    18 3585.755
#&gt; 83:    24 3545.226
#&gt; 84:    22 3557.271
#&gt; 85:    19 3578.485
#&gt; 86:    25 3543.665
#&gt; 87:    86 3587.553
#&gt; 88:    87 3568.405
#&gt; 89:    88 3550.697
#&gt; 90:    89 3531.835
#&gt;     chunk  runtime</div><span class='co'># NOT RUN {</span>
<span class='fu'><a href='submitJobs.html'>submitJobs</a></span>(<span class='no'>ids</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)
<span class='co'># }</span><div class='input'>
<span class='co'># Group jobs into 10 chunks with similar runtime</span>
<span class='no'>ids</span> <span class='kw'>=</span> <span class='no'>est</span>$<span class='no'>runtimes</span>[<span class='no'>type</span> <span class='kw'>==</span> <span class='st'>"estimated"</span>]
<span class='no'>ids</span>[, <span class='no'>chunk</span> <span class='kw'>:=</span> <span class='fu'><a href='chunk.html'>lpt</a></span>(<span class='no'>runtime</span>, <span class='fl'>10</span>)]</div><div class='output co'>#&gt;      job.id      type   runtime chunk
#&gt;       &lt;int&gt;    &lt;fctr&gt;     &lt;num&gt; &lt;int&gt;
#&gt;   1:      1 estimated 1043.1353     8
#&gt;   2:      2 estimated 1042.6340     6
#&gt;   3:      3 estimated  190.8529     2
#&gt;   4:      5 estimated  195.5074     8
#&gt;  ---                                 
#&gt; 446:    495 estimated  560.1503     4
#&gt; 447:    496 estimated 1396.1413     9
#&gt; 448:    498 estimated  596.3900     5
#&gt; 449:    499 estimated  572.4746     7
#&gt; 450:    500 estimated  560.1503     7</div><div class='input'><span class='fu'>print</span>(<span class='no'>ids</span>[, <span class='fu'>list</span>(<span class='kw'>runtime</span> <span class='kw'>=</span> <span class='fu'>sum</span>(<span class='no'>runtime</span>)), <span class='kw'>by</span> <span class='kw'>=</span> <span class='no'>chunk</span>])</div><div class='output co'>#&gt;     chunk  runtime
#&gt;     &lt;int&gt;    &lt;num&gt;
#&gt;  1:     8 31755.20
#&gt;  2:     6 31755.86
#&gt;  3:     2 31880.62
#&gt;  4:     4 31755.34
#&gt;  5:    10 31884.81
#&gt;  6:     3 31888.81
#&gt;  7:     1 31885.55
#&gt;  8:     5 31755.98
#&gt;  9:     7 31883.20
#&gt; 10:     9 31755.63</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Michel Lang, Bernd Bischl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

