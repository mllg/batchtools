<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Add Experiments to the Registry — addExperiments • batchtools</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
<meta property="og:title" content="Add Experiments to the Registry — addExperiments" />

<meta property="og:description" content="Adds experiments (parametrized combinations of problems with algorithms) to the registry and thereby defines batch jobs.
If multiple problem designs or algorithm designs are provided, they are combined via the Cartesian product.
E.g., if you have two problems p1 and p2 and three algorithms a1, a2 and a3,
addExperiments creates experiments for all parameters for the combinations (p1, a1), (p1, a2),
(p1, a3), (p2, a1), (p2, a2) and (p2, a3)." />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">batchtools</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.9.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/batchtools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mllg/batchtools">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add Experiments to the Registry</h1>
    <small>Source: <a href='https://github.com/mllg/batchtools/blob/master/R/addExperiments.R'><code>R/addExperiments.R</code></a></small>
    </div>

    
    <p>Adds experiments (parametrized combinations of problems with algorithms) to the registry and thereby defines batch jobs.</p>
<p>If multiple problem designs or algorithm designs are provided, they are combined via the Cartesian product.
E.g., if you have two problems <code>p1</code> and <code>p2</code> and three algorithms <code>a1</code>, <code>a2</code> and <code>a3</code>,
<code>addExperiments</code> creates experiments for all parameters for the combinations <code>(p1, a1)</code>, <code>(p1, a2)</code>,
<code>(p1, a3)</code>, <code>(p2, a1)</code>, <code>(p2, a2)</code> and <code>(p2, a3)</code>.</p>
    

    <pre class="usage"><span class='fu'>addExperiments</span>(<span class='kw'>prob.designs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>algo.designs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>repls</span> <span class='kw'>=</span> <span class='fl'>1L</span>,
  <span class='kw'>combine</span> <span class='kw'>=</span> <span class='st'>"crossprod"</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='fu'><a href='getDefaultRegistry.html'>getDefaultRegistry</a></span>())</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>prob.designs</th>
      <td><p>[named list of <code><a href='http://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></code>]<br />
Named list of data frames (or <code><a href='http://www.rdocumentation.org/packages/data.table/topics/data.table'>data.table</a></code>).
The name must match the problem name while the column names correspond to parameters of the problem.
If <code>NULL</code>, experiments for all defined problems without any parameters are added.</p></td>
    </tr>
    <tr>
      <th>algo.designs</th>
      <td><p>[named list of <code><a href='http://www.rdocumentation.org/packages/data.table/topics/data.table'>data.table</a></code> or <code><a href='http://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></code>]<br />
Named list of data frames (or <code><a href='http://www.rdocumentation.org/packages/data.table/topics/data.table'>data.table</a></code>).
The name must match the algorithm name while the column names correspond to parameters of the algorithm.
If <code>NULL</code>, experiments for all defined algorithms without any parameters are added.</p></td>
    </tr>
    <tr>
      <th>repls</th>
      <td><p>[<code>integer(1)</code>]<br />
Number of replications for each experiment.</p></td>
    </tr>
    <tr>
      <th>combine</th>
      <td><p>[<code>character(1)</code>]<br />
How to combine the rows of a single problem design with the rows of a single algorithm design?
Default is &#8220;crossprod&#8221; which combines each row of the problem design which each row of the algorithm design
in a cross-product fashion. Set to &#8220;bind&#8221; to just <code><a href='http://www.rdocumentation.org/packages/base/topics/cbind'>cbind</a></code> the tables of
problem and algorithm designs where the shorter table is repeated if necessary.</p></td>
    </tr>
    <tr>
      <th>reg</th>
      <td><p>[<code><a href='makeExperimentRegistry.html'>ExperimentRegistry</a></code>]<br />
Registry. If not explicitly passed, uses the last created registry.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>[<code>data.table</code>] with ids of added jobs stored in column &#8220;job.id&#8221;.</p>
    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>R's <code>data.frame</code> converts character vectors to factors by default which frequently resulted in problems using <code>addExperiments</code>.
Therefore, this function will warn about factor variables if the following conditions hold:</p><ol>
<li><p>The design is passed as a <code>data.frame</code>, not a <code><a href='http://www.rdocumentation.org/packages/data.table/topics/data.table'>data.table</a></code> or <code><a href='http://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code>.</p></li>
<li><p>The option &#8220;stringsAsFactors&#8221; is not set or set to <code>TRUE</code>.</p></li>
</ol>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p>Other Experiment: <code><a href='removeExperiments.html'>removeExperiments</a></code>,
  <code><a href='summarizeExperiments.html'>summarizeExperiments</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>tmp</span> <span class='kw'>=</span> <span class='fu'><a href='makeExperimentRegistry.html'>makeExperimentRegistry</a></span>(<span class='kw'>file.dir</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>make.default</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; <span class='message'>No configuration file found</span></div><div class='output co'>#&gt; <span class='message'>Created registry in '/var/folders/pj/dcslzytj3t30v_ylpyyfyyl00000gn/T/batchtools-example/reg' using cluster functions 'Interactive'</span></div><div class='input'>
<span class='co'># add first problem</span>
<span class='no'>fun</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>job</span>, <span class='no'>data</span>, <span class='no'>n</span>, <span class='no'>mean</span>, <span class='no'>sd</span>, <span class='no'>...</span>) <span class='fu'>rnorm</span>(<span class='no'>n</span>, <span class='kw'>mean</span> <span class='kw'>=</span> <span class='no'>mean</span>, <span class='kw'>sd</span> <span class='kw'>=</span> <span class='no'>sd</span>)
<span class='fu'><a href='addProblem.html'>addProblem</a></span>(<span class='st'>"rnorm"</span>, <span class='kw'>fun</span> <span class='kw'>=</span> <span class='no'>fun</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding problem 'rnorm'</span></div><div class='input'>
<span class='co'># add second problem</span>
<span class='no'>fun</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>job</span>, <span class='no'>data</span>, <span class='no'>n</span>, <span class='no'>lambda</span>, <span class='no'>...</span>) <span class='fu'>rexp</span>(<span class='no'>n</span>, <span class='kw'>rate</span> <span class='kw'>=</span> <span class='no'>lambda</span>)
<span class='fu'><a href='addProblem.html'>addProblem</a></span>(<span class='st'>"rexp"</span>, <span class='kw'>fun</span> <span class='kw'>=</span> <span class='no'>fun</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding problem 'rexp'</span></div><div class='input'>
<span class='co'># add first algorithm</span>
<span class='no'>fun</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>instance</span>, <span class='no'>method</span>, <span class='no'>...</span>) <span class='kw'>if</span> (<span class='no'>method</span> <span class='kw'>==</span> <span class='st'>"mean"</span>) <span class='fu'>mean</span>(<span class='no'>instance</span>) <span class='kw'>else</span> <span class='fu'>median</span>(<span class='no'>instance</span>)
<span class='fu'><a href='addAlgorithm.html'>addAlgorithm</a></span>(<span class='st'>"average"</span>, <span class='kw'>fun</span> <span class='kw'>=</span> <span class='no'>fun</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding algorithm 'average'</span></div><div class='input'>
<span class='co'># add second algorithm</span>
<span class='no'>fun</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>instance</span>, <span class='no'>...</span>) <span class='fu'>sd</span>(<span class='no'>instance</span>)
<span class='fu'><a href='addAlgorithm.html'>addAlgorithm</a></span>(<span class='st'>"deviation"</span>, <span class='kw'>fun</span> <span class='kw'>=</span> <span class='no'>fun</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding algorithm 'deviation'</span></div><div class='input'>
<span class='co'># define problem and algorithm designs</span>
<span class='no'>prob.designs</span> <span class='kw'>=</span> <span class='no'>algo.designs</span> <span class='kw'>=</span> <span class='fu'>list</span>()
<span class='no'>prob.designs</span>$<span class='no'>rnorm</span> <span class='kw'>=</span> <span class='fu'>CJ</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>mean</span> <span class='kw'>=</span> -<span class='fl'>1</span>:<span class='fl'>1</span>, <span class='kw'>sd</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span>)
<span class='no'>prob.designs</span>$<span class='no'>rexp</span> <span class='kw'>=</span> <span class='fu'>data.table</span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>100</span>, <span class='kw'>lambda</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span>)
<span class='no'>algo.designs</span>$<span class='no'>average</span> <span class='kw'>=</span> <span class='fu'>data.table</span>(<span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"mean"</span>, <span class='st'>"median"</span>))
<span class='no'>algo.designs</span>$<span class='no'>deviation</span> <span class='kw'>=</span> <span class='fu'>data.table</span>()

<span class='co'># add experiments and submit</span>
<span class='fu'>addExperiments</span>(<span class='no'>prob.designs</span>, <span class='no'>algo.designs</span>, <span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt; <span class='message'>Adding 30 experiments ('rnorm'[15] x 'average'[2] x repls[1]) ...</span></div><div class='output co'>#&gt; <span class='message'>Adding 15 experiments ('rnorm'[15] x 'deviation'[1] x repls[1]) ...</span></div><div class='output co'>#&gt; <span class='message'>Adding 10 experiments ('rexp'[5] x 'average'[2] x repls[1]) ...</span></div><div class='output co'>#&gt; <span class='message'>Adding 5 experiments ('rexp'[5] x 'deviation'[1] x repls[1]) ...</span></div><div class='input'>
<span class='co'># check what has been created</span>
<span class='fu'><a href='summarizeExperiments.html'>summarizeExperiments</a></span>(<span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>)</div><div class='output co'>#&gt;    problem algorithm .count
#&gt;     &lt;char&gt;    &lt;char&gt;  &lt;int&gt;
#&gt; 1:   rnorm   average     30
#&gt; 2:   rnorm deviation     15
#&gt; 3:    rexp   average     10
#&gt; 4:    rexp deviation      5</div><div class='input'><span class='fu'><a href='unwrap.html'>unwrap</a></span>(<span class='fu'><a href='getJobTable.html'>getJobPars</a></span>(<span class='kw'>reg</span> <span class='kw'>=</span> <span class='no'>tmp</span>))</div><div class='output co'>#&gt;     job.id problem algorithm     n  mean    sd lambda method
#&gt;      &lt;int&gt;  &lt;char&gt;    &lt;char&gt; &lt;num&gt; &lt;int&gt; &lt;int&gt;  &lt;int&gt; &lt;char&gt;
#&gt;  1:      1   rnorm   average   100    -1     1     NA   mean
#&gt;  2:      2   rnorm   average   100    -1     1     NA median
#&gt;  3:      3   rnorm   average   100    -1     2     NA   mean
#&gt;  4:      4   rnorm   average   100    -1     2     NA median
#&gt;  5:      5   rnorm   average   100    -1     3     NA   mean
#&gt;  6:      6   rnorm   average   100    -1     3     NA median
#&gt;  7:      7   rnorm   average   100    -1     4     NA   mean
#&gt;  8:      8   rnorm   average   100    -1     4     NA median
#&gt;  9:      9   rnorm   average   100    -1     5     NA   mean
#&gt; 10:     10   rnorm   average   100    -1     5     NA median
#&gt; 11:     11   rnorm   average   100     0     1     NA   mean
#&gt; 12:     12   rnorm   average   100     0     1     NA median
#&gt; 13:     13   rnorm   average   100     0     2     NA   mean
#&gt; 14:     14   rnorm   average   100     0     2     NA median
#&gt; 15:     15   rnorm   average   100     0     3     NA   mean
#&gt; 16:     16   rnorm   average   100     0     3     NA median
#&gt; 17:     17   rnorm   average   100     0     4     NA   mean
#&gt; 18:     18   rnorm   average   100     0     4     NA median
#&gt; 19:     19   rnorm   average   100     0     5     NA   mean
#&gt; 20:     20   rnorm   average   100     0     5     NA median
#&gt; 21:     21   rnorm   average   100     1     1     NA   mean
#&gt; 22:     22   rnorm   average   100     1     1     NA median
#&gt; 23:     23   rnorm   average   100     1     2     NA   mean
#&gt; 24:     24   rnorm   average   100     1     2     NA median
#&gt; 25:     25   rnorm   average   100     1     3     NA   mean
#&gt; 26:     26   rnorm   average   100     1     3     NA median
#&gt; 27:     27   rnorm   average   100     1     4     NA   mean
#&gt; 28:     28   rnorm   average   100     1     4     NA median
#&gt; 29:     29   rnorm   average   100     1     5     NA   mean
#&gt; 30:     30   rnorm   average   100     1     5     NA median
#&gt; 31:     31   rnorm deviation   100    -1     1     NA     NA
#&gt; 32:     32   rnorm deviation   100    -1     2     NA     NA
#&gt; 33:     33   rnorm deviation   100    -1     3     NA     NA
#&gt; 34:     34   rnorm deviation   100    -1     4     NA     NA
#&gt; 35:     35   rnorm deviation   100    -1     5     NA     NA
#&gt; 36:     36   rnorm deviation   100     0     1     NA     NA
#&gt; 37:     37   rnorm deviation   100     0     2     NA     NA
#&gt; 38:     38   rnorm deviation   100     0     3     NA     NA
#&gt; 39:     39   rnorm deviation   100     0     4     NA     NA
#&gt; 40:     40   rnorm deviation   100     0     5     NA     NA
#&gt; 41:     41   rnorm deviation   100     1     1     NA     NA
#&gt; 42:     42   rnorm deviation   100     1     2     NA     NA
#&gt; 43:     43   rnorm deviation   100     1     3     NA     NA
#&gt; 44:     44   rnorm deviation   100     1     4     NA     NA
#&gt; 45:     45   rnorm deviation   100     1     5     NA     NA
#&gt; 46:     46    rexp   average   100    NA    NA      1   mean
#&gt; 47:     47    rexp   average   100    NA    NA      1 median
#&gt; 48:     48    rexp   average   100    NA    NA      2   mean
#&gt; 49:     49    rexp   average   100    NA    NA      2 median
#&gt; 50:     50    rexp   average   100    NA    NA      3   mean
#&gt; 51:     51    rexp   average   100    NA    NA      3 median
#&gt; 52:     52    rexp   average   100    NA    NA      4   mean
#&gt; 53:     53    rexp   average   100    NA    NA      4 median
#&gt; 54:     54    rexp   average   100    NA    NA      5   mean
#&gt; 55:     55    rexp   average   100    NA    NA      5 median
#&gt; 56:     56    rexp deviation   100    NA    NA      1     NA
#&gt; 57:     57    rexp deviation   100    NA    NA      2     NA
#&gt; 58:     58    rexp deviation   100    NA    NA      3     NA
#&gt; 59:     59    rexp deviation   100    NA    NA      4     NA
#&gt; 60:     60    rexp deviation   100    NA    NA      5     NA
#&gt;     job.id problem algorithm     n  mean    sd lambda method</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Michel Lang, Bernd Bischl.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>

